<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mobile Movible y Escalable</title>
<style>
  .welcome {
  display: block;
  margin: 50px auto 20px;
  max-width: 300px;
  height: auto;
  opacity: 0;
  animation: fadeIn 1.2s forwards;
}

@keyframes fadeIn {
  to { opacity: 1; }
}

  body {
    background-color: #ffffff;
    color: #000;
    font-family: Consolas, monospace;
    font-size: 28px;
    margin: 0;
    height: 100vh;
    overflow: hidden;
  }

  #banner-top {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    display: flex;
    align-items: flex-start;
    height: 100px;
    z-index: 10;
    background: #fff;
  }

  #banner-top img {
    height: 100%;
    width: auto;
    display: block;
  }

  #banner-bottom {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: flex-end;
    height: 100px;
    z-index: 10;
    background: #fff;
  }

  #banner-bottom img {
    height: 100%;
    width: auto;
    max-width: 100%;
    display: block;
  }

  #content-wrapper {
    position: absolute;
    top: 100px;
    bottom: 100px;
    left: 0;
    right: 0;
    overflow-y: auto;
    padding: 10px;
  }

  #content {
    white-space: pre-wrap;
    line-height: 32px;
    text-align: center;
  }

  img.mobile {
    width: 100%;
    user-select: none;
    max-width: 150px;
    position: absolute;
    cursor: grab;
    z-index: 9999;
  }

  /* Imagen de bienvenida */
  .welcome {
    display: block;
    margin: 50px auto 20px;
    max-width: 300px;
    height: auto;
  }

  .welcome-text {
    text-align: center;
    font-size: 22px;
    color: #555;
  }
</style>
</head>
<body>
  <div id="banner-top"></div>

  <div id="content-wrapper">
    <div id="content"></div>
  </div>

  <div id="banner-bottom"></div>

  <script>
    const contentDiv = document.getElementById('content');
    const wrapper = document.getElementById('content-wrapper');
    let fullText = "";

    // Texto desde contenido.txt
// Recibir contenido
window.electronAPI.onFileChange((text) => {
  contentDiv.innerHTML = ''; // Limpiar bienvenida si estaba
  const isAtBottom = wrapper.scrollHeight - wrapper.scrollTop <= wrapper.clientHeight + 10;
  contentDiv.textContent = text;
  if (isAtBottom) wrapper.scrollTop = wrapper.scrollHeight;
});

// Recibir bienvenida
window.electronAPI.onNoFile(({ welcomePath }) => {
  contentDiv.innerHTML = '';

  const welcomeImg = document.createElement('img');
  welcomeImg.src = welcomePath;
  welcomeImg.alt = 'Bienvenido';
  welcomeImg.classList.add('welcome');

  const msg = document.createElement('div');
  msg.textContent = 'Â¡Bienvenido! En breve comenzaremos a atenderle.'; // mensaje para cliente
  msg.classList.add('welcome-text');

  contentDiv.appendChild(welcomeImg);
  contentDiv.appendChild(msg);
});


    // Banners e imÃ¡genes mÃ³viles
    window.electronAPI.onLoadImages(({ bannersTop, mobileImgs, bannersBottom }) => {
      const topDiv = document.getElementById('banner-top');
      const bottomDiv = document.getElementById('banner-bottom');
      topDiv.innerHTML = '';
      bottomDiv.innerHTML = '';

      bannersTop.forEach(src => {
        const img = document.createElement('img');
        img.src = src;
        topDiv.appendChild(img);
      });

      bannersBottom.forEach(src => {
        const img = document.createElement('img');
        img.src = src;
        bottomDiv.appendChild(img);
      });

      // ImÃ¡genes mÃ³viles movibles y escalables
      mobileImgs.forEach(src => {
        const img = document.createElement('img');
        img.src = src;
        img.classList.add('mobile');

        img.style.left = Math.random() * (window.innerWidth - 150) + 'px';
        img.style.top = Math.random() * (window.innerHeight - 150) + 'px';
        img.style.width = '150px';
        img.style.height = 'auto';

        let offsetX, offsetY, isDragging = false;
        let isScaling = false, startY, startHeight;

        img.addEventListener('mousedown', e => {
          if (e.ctrlKey) {
            isScaling = true;
            startY = e.clientY;
            startHeight = img.offsetHeight;
            e.preventDefault();
          } else {
            isDragging = true;
            offsetX = e.clientX - img.offsetLeft;
            offsetY = e.clientY - img.offsetTop;
            img.style.cursor = 'grabbing';
          }
        });

        document.addEventListener('mousemove', e => {
          if (isScaling) {
            const dy = e.clientY - startY;
            img.style.height = Math.max(50, startHeight + dy) + 'px';
            img.style.width = 'auto';
          }
          if (isDragging) {
            let newX = e.clientX - offsetX;
            let newY = e.clientY - offsetY;
            newX = Math.max(0, Math.min(window.innerWidth - img.offsetWidth, newX));
            newY = Math.max(0, Math.min(window.innerHeight - img.offsetHeight, newY));
            img.style.left = newX + 'px';
            img.style.top = newY + 'px';
          }
        });

        document.addEventListener('mouseup', () => {
          isDragging = false;
          isScaling = false;
          img.style.cursor = 'grab';
        });

        document.body.appendChild(img);
      });
    });

    // ðŸ’¡ Mostrar imagen de bienvenida si no hay contenido.txt
    window.electronAPI.onNoFile(({ welcomePath }) => {
      contentDiv.innerHTML = '';

      const welcomeImg = document.createElement('img');
      welcomeImg.src = welcomePath;
      welcomeImg.alt = 'Bienvenido';
      welcomeImg.classList.add('welcome');

      const msg = document.createElement('div');
      msg.textContent = "Â¡Bienvenido! Estamos listos para atenderle.";
      msg.classList.add('welcome-text');

      contentDiv.appendChild(welcomeImg);
      contentDiv.appendChild(msg);
    });
  </script>
</body>
</html>
